#№ Отчет по лабораторной работе №2
## по курсу "Логическое программирование"

## Решение логических задач

### студент: Баранников С.А.

## Результат проверки

| Преподаватель     | Дата         |  Оценка       |
|-------------------|--------------|---------------|
| Сошников Д.В. |              |               |
| Левинская М.А.|   30.11      |       3       |

> *Комментарии проверяющих (обратите внимание, что более подробные комментарии возможны непосредственно в репозитории по тексту программы)*


## Введение

Опишите своими словами, какие подходы существуют к решению логических задач. Почему Prolog оказывается удобным языком для написания решателей таких задач?

Задачи бывают:
- на установление соответствий
- на поиск в пространстве состояний

Тут же решалась задача на установление соответствий. Prolog является очень удобным языком для решения таких задач, поскольку он обладает очень хорошей метасимвольной логикой, где программисту всего лишь требуется написать программу так, чтобы она сама думала над соответствиями, перебирала их и сопоставляла требуемые для программиста значения.

В случае второго типа задач на поиск используется запросная логика поиска данных, которая также очень хорошо реализована в Prolog.


## Задание

3. Как-то раз случай свел в купе известного астронома, поэта, прозаика и драматурга. Это были Алексеев, Борисов, Константинов и Дмитриев. Оказалось, что каждый из них взял с собой книгу, написанную одним из пассажиров этого купе. Алексеев и Борисов углубились в чтение, предварительно обменявшись купленными книгами. Поэт читал пьесу. Прозаик, очень молодой человек, выпустивший свою первую книгу, говорил, что он никогда ничего не читает по астрономии. Борисов купил в дорогу одно из произведений Дмитриева. Никто из пассажиров не покупал и не читал книги, написанные им самим. Что читал каждый из них? Кто кем был?

## Принцип решения

Опишите своими словами принцип решения задачи, приведите важные фрагменты кода.

Для начала задаются основные утверждения
```prolog
man('Алексеев').
man('Борисов').
man('Константинов').
man('Дмитриев').
book('астрономия').
book('поэзия').
book('проза').
book('пьеса').
```
где объявлены фамилии в `man(...)`
  и типы произведений в `book(...)`,

после чего можно решать задачу на соответствии `passenger(N, NWrite, NBuy, NRead)`, где `N` - имя человека, `NWrite` - его род деятельности в формате собственной книги, `NBuy` - книга, которую он купил в дорогу, `NRead` - книга, которую он в итоге читает в дороге

```prolog
	Solve = [passenger(X, XWrite, XBuy, XRead), passenger(Y, YWrite, YBuy, YRead), passenger(Z, ZWrite, ZBuy, ZRead), passenger(W, WWrite, WBuy, WRead)],
	% 4 разных пасажира
	man(X),
	man(Y),
	man(Z),
	man(W),
	unique([X, Y, Z, W]),
	% каждый написал книгу
	book(XWrite),
	book(YWrite),
	book(ZWrite),
	book(WWrite),
	unique([XWrite, YWrite, ZWrite, WWrite]),
	% каждый купил книгу
	book(XBuy),
	book(YBuy),
	book(ZBuy),
	book(WBuy),
	unique([XBuy, YBuy, ZBuy, WBuy]),
	% каждый читает книгу
	book(XRead),
	book(YRead),
	book(ZRead),
	book(WRead),
	unique([XRead, YRead, ZRead, WRead])
```
Тут обозначены все требуемые переменные с условием, что переменные одного вида обязаны быть уникальны. Уникальность достигается предикатом `unique()/1`

```prolog
unique([]):-!.
unique([Head|Tail]):-
   member(Head, Tail), !, fail;
   unique(Tail).
   ```
Далее вводятся ограничения, описанные в задании
```prolog
	% поэт читает пьесу
	member(passenger(_, 'поэзия', _, 'пьеса'), Solve),
	% прозаик читает не астрономию
	not(member(passenger(_, 'проза', _, 'астрономия'), Solve)),
	% прозаик не покупал астрономию
	not(member(passenger(_, 'проза', 'астрономия', _), Solve)),
	% никто не читает и не покупал свою книгу
	check(Solve),
	% алексеев и борисов обменялись книгами
	member(passenger('Алексеев', _, ABuy, ARead), Solve),
	member(passenger('Борисов', _, ARead, ABuy), Solve),
	% Борисов купил произведение Дмитриева
	member(passenger('Дмитриев', DWrite, _, _), Solve),
	member(passenger('Борисов', _, DWrite, _), Solve).
```
где предикат `check()/1`
```prolog
check([]):-!.
check([passenger(_, XWrite, XBuy, XRead)|T]):- !, not(XRead = XWrite), not(XBuy = XWrite), check(T).
```
добавляет еще такие ограничения, что автор книги не может читать свою книгу и, соответственно, не покупает ее в дорогу.

Все собрано в одну общую функцию для получения решения `build_solve()/1`
```prolog
	build_solve(Solve):- solve(Solve), Solve = [passenger('Алексеев', _, _, _), passenger('Борисов', _, _, _), passenger('Константинов', _, _, _), passenger('Дмитриев', _, _, _)].
```

## Ответ, Решение задачи

```prolog
?- build_solve(X).

X = [passenger('Алексеев', астрономия, пьеса, проза), passenger('Борисов', поэзия, проза, пьеса), passenger('Константинов', пьеса, астрономия, астрономия), passenger('Дмитриев', проза, поэзия, поэзия)].
```
где
### Таблица
| Человек     | Написал книгу         |  Взял в дорогу      |  Читал в дороге     |
|-------------------|--------------|---------------|--------------|
| Алексеев |   астрономия     |     пьеса          |   проза      |
| Борисов  |    поэзия        |     проза          |    пьеса     |
| Константинов |   пьеса      |    астрономия      |  астрономия  |
| Дмитриев |      проза       |    поэзия          |   поэзия     |

## Выводы

Сформулируйте *содержательные* выводы по лабораторной работе. Чему она вас научила? Над чем заставила задуматься? Помните, что несодержательные выводы -
самая частая причина снижения оценки за лабораторную.

Данная лабораторная работа позволяет хорошо разобраться в логике языка Prolog для решения задач Логического типа, что является очень полезным навыком на практике, а в случае, если задан большой список условий, с которым надо работать, то тем более можно упростить себе жизнь, решив задачу с помощью Prolog, и не грузить себя большим объемом информации и зависимостей, решая задачу на листочке.
